FROM golang:latest
RUN curl https://glide.sh/get | sh
ENV GOBIN /go/bin
ENV PKG_NAME=github.com/chainpoint/chainpoint-core/go-abci-service
ENV PKG_PATH=$GOPATH/src/$PKG_NAME
WORKDIR $PKG_PATH
COPY go-abci-service/glide.yaml go-abci-service/glide.lock $PKG_PATH/
RUN glide install
ADD go-abci-service $PKG_PATH
RUN make install
CMD ["./run.sh"]
